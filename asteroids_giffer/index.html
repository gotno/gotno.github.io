<!DOCTYPE html>
<html>
<head>
  <title>ASTEROIDS</title>
  <link rel='stylesheet' type='text/css' href='index.css'>
</head>
  <body>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-47859307-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <div id="container">
      <canvas width="800" height="600"></canvas>
      <script src='./assets/keymaster.js'></script>
      <script src='./assets/jquery-1.11.0.js'></script>
      <script src='./assets/animated_gif.js'></script>
      <script src='./script/util.js'></script>
      <script src='./script/point.js'></script>
      <script src='./script/moving_object.js'></script>
      <script src='./script/moving_object_pointed.js'></script>
      <script src='./script/game.js'></script>
      <script src='./script/hud.js'></script>
      <script src='./script/asteroid.js'></script>
      <script src='./script/ship.js'></script>
      <script src='./script/bullet.js'></script>
      <script src='./script/particle/emitter.js'></script>
      <script src='./script/particle/particle.js'></script>
      <script>
        var canvas = document.getElementsByTagName('canvas')[0];
        game = new Asteroids.Game(canvas.getContext('2d'), canvas);
        game.start();

        var makeGif = function(delay) {
          var imgs = document.querySelectorAll('img');

          // change workerPath to point to where Animated_GIF.worker.js is
          var ag = new Animated_GIF({ workerPath: 'assets/animated_gif_worker.js' }); 
          ag.setSize(800, 600);
          ag.setDelay(delay || 90);

          for(var i = 0; i < imgs.length; i++) {
              ag.addFrame(imgs[i]);
          }

          var animatedImage = document.createElement('img');

          // This is asynchronous, rendered with WebWorkers
          ag.getBase64GIF(function(image) {
              animatedImage.src = image;
              document.body.appendChild(animatedImage);
          });
        }
      </script>
      <ul class="images">
      </ul>
    </div>
  </body>
</html>
